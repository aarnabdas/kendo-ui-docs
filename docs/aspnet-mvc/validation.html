<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Validation guide for Telerik UI for ASP.NET MVC</title>
        <link rel="shortcut icon" href="/kendo-ui/favicon.ico"/>
        <meta name="description" content="Using Validation in MVC">
        <link href="http://cdn.kendostatic.com/2015.1.429/styles/kendo.common.min.css" rel="stylesheet" />
        <link type="text/css" rel="stylesheet" href="/kendo-ui/assets/styles.css">
        <link type="text/css" rel="stylesheet" href="/kendo-ui/assets/theme.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://cdn.kendostatic.com/2015.1.429/js/kendo.web.min.js"></script>
        <script type="text/javascript" src="/kendo-ui/assets/prettify.js"></script>
        <script type="text/javascript" src="/kendo-ui/assets/app.js"></script>
        

        <!--[if lt IE 9]>
        <script>
        document.createElement('header');
        document.createElement('nav');
        document.createElement('section');
        document.createElement('article');
        document.createElement('aside');
        document.createElement('footer');
        document.createElement('hgroup');
        </script>
        <![endif]-->
    </head>
    <body>
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-6X92" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <script>(function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-6X92');</script>
        <!-- End Google Tag Manager -->
        <header id="page-header">
            <span class="toggle-nav"><span></span></span>
            <div id="logo-bar">
    <a href="/kendo-ui/">
        <img alt="Kendo UI logo" class="logo" src="/kendo-ui/images/aspnet-mvc.png">
    </a>
</div>

<div id="page-search">
    <script>
  (function() {
    var cx = '001595215763381649090:eblhnfskwrk';
    var gcse = document.createElement('script');
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>

</div>

<span class="show-search">
	<span class="k-icon k-i-search"></span>
</span>

<div class="nav-buttons">
    <a href="http://demos.telerik.com/aspnet-mvc" class="btn demos-btn">Demos</a>
    <a href="http://www.telerik.com/aspnet-mvc" class="btn about-btn">About</a>
    <a href="http://www.telerik.com/purchase/aspnet-mvc" class="btn pricing-btn">Pricing</a>
    <a href="http://www.telerik.com/download/aspnet-mvc" class="btn btn-primary">Try now</a>
</div>

        </header>

        <div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
        $("#page-tree").kendoTreeView({
            dataSource: {
                transport: {
                    read: {
                        url: "/kendo-ui/default.json",
                        dataType: "json"
                    }
                },
                schema: {
                    model: {
                        id: "path",
                        children: "items",
                        hasChildren: "items"
                    }
                }
            },
            select: preventParentSelection,
            template: navigationTemplate("/kendo-ui/"),
            dataBound: expandNavigation("aspnet-mvc/validation.html")
        });
        </script>
    </div>

    <a id="page-edit-link" class="btn btn-action" href="https://github.com/telerik/kendo-ui-core/edit/master/docs//aspnet-mvc/validation.md">Edit this page</a>

    

    <div id="page-article">
        <article>
            <h1 id="validation"><a href="#validation">Validation</a></h1>

<p>This page describes how to use client-side Validation with Telerik UI for ASP.NET MVC. The page provides tutorials on how to use the Kendo UI Validator and the MVC default jQuery validation. It also contains a list of the common problems while implementing the client-side validation and information on how to resolve them.</p>

<h2 id="using-the-kendo-ui-validator-with-dataannotation-attributes"><a href="#using-the-kendo-ui-validator-with-dataannotation-attributes">Using the Kendo UI Validator with DataAnnotation attributes</a></h2>

<p>The Kendo UI Validator creates validation rules based on the unobtrusive HTML attributes. Those unobtrusive attributes are generated by ASP.NET MVC based on the DataAnnotation attributes applied to the Model properties. Currently, the supported DataAnnotation attributes are:</p>

<ul>
<li>Required</li>
<li>StringLength</li>
<li>Range</li>
<li>RegularExpression</li>
</ul>

<p>The Kendo UI Validator also creates rules for the unobtrusive attributes that are generated implicitly by MVC for numbers and dates.</p>

<p>To use the Validator with the DataAnnotation attributes you should follow these steps.</p>

<ol>
<li>
<p>Create a class and add the needed DataAnnotation attributes.</p>

<pre><code>public class OrderViewModel
{
    [HiddenInput(DisplayValue = false)]
    public int OrderID { get; set; }

    [Required]
    [Display(Name = "Customer")]
    public string CustomerID { get; set; }

    [StringLength(15)]
    [Display(Name = "Ship Country")]
    public string ShipCountry { get; set; }

    [Range(1, int.MaxValue, ErrorMessage = "Freight should be greater than 1")]
    [DataType(DataType.Currency)]
    public decimal? Freight { get; set; }

    [Display(Name = "Order Date")]
    public DateTime? OrderDate { get; set; }
}
</code></pre>
</li>
<li>
<p>Pass an instance of the model to the view.</p>

<pre><code>public ActionResult Create()
{
    ViewData["customers"] = GetCustomers();
    return View(new OrderViewModel());
}
</code></pre>
</li>
<li>
<p>Create the editors in the view based on the model and initialize the Kendo UI Validator on the form.</p>

<pre><code>@model OrderViewModel

@using (Html.BeginForm()) {
    &lt;fieldset&gt;
        &lt;legend&gt;Order&lt;/legend&gt;

        @Html.HiddenFor(model =&gt; model.OrderID)

        &lt;div class="editor-label"&gt;
            @Html.LabelFor(model =&gt; model.CustomerID)
        &lt;/div&gt;
        &lt;div class="editor-field"&gt;
            @(
                Html.Kendo().DropDownListFor(model =&gt; model.CustomerID)
                    .OptionLabel("Select Customer")
                    .BindTo(ViewData["customers"] as SelectList)
            )
            @Html.ValidationMessageFor(model =&gt; model.CustomerID)
        &lt;/div&gt;

        &lt;div class="editor-label"&gt;
            @Html.LabelFor(model =&gt; model.ShipCountry)
        &lt;/div&gt;
        &lt;div class="editor-field"&gt;
            @Html.EditorFor(model =&gt; model.ShipCountry)
            @Html.ValidationMessageFor(model =&gt; model.ShipCountry)
        &lt;/div&gt;

        &lt;div class="editor-label"&gt;
            @Html.LabelFor(model =&gt; model.Freight)
        &lt;/div&gt;
        &lt;div class="editor-field"&gt;
            @Html.Kendo().NumericTextBoxFor(model =&gt; model.Freight)
            @Html.ValidationMessageFor(model =&gt; model.Freight)
        &lt;/div&gt;

        &lt;div class="editor-label"&gt;
            @Html.LabelFor(model =&gt; model.OrderDate)
        &lt;/div&gt;
        &lt;div class="editor-field"&gt;
            @Html.Kendo().DatePickerFor(model =&gt; model.OrderDate)
            @Html.ValidationMessageFor(model =&gt; model.OrderDate)
        &lt;/div&gt;

        &lt;p&gt;
            &lt;input type="submit" value="Save" /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
}

&lt;script&gt;
    $(function () {
        $("form").kendoValidator();
    });
&lt;/script&gt;
</code></pre>
</li>
</ol>

<h2 id="implementing-a-custom-attribute"><a href="#implementing-a-custom-attribute">Implementing a custom attribute</a></h2>

<p>If there is a scenario where the built-in rules cannot be used, you can implement a custom validation attribute. To demonstrate this scenario lets include a ShippedDate field to our model and implement a GreaterDateAttribute attribute that will check whether the selected ShippedDate value is greater than the selected OrderDate.</p>

<ol>
<li>
<p>Create a class that inherits from <code>ValidationAttribute</code> and <code>IClientValidatable</code> and implement the <code>IsValid</code> and <code>GetClientValidationRules</code> methods.</p>

<pre><code>[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public class GreaterDateAttribute : ValidationAttribute, IClientValidatable
{
    public string EarlierDateField { get; set; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        DateTime? date = value != null ? (DateTime?)value : null;
        var earlierDateValue = validationContext.ObjectType.GetProperty(EarlierDateField)
            .GetValue(validationContext.ObjectInstance, null);
        DateTime? earlierDate = earlierDateValue != null ? (DateTime?)earlierDateValue : null;

        if (date.HasValue &amp;&amp; earlierDate.HasValue &amp;&amp; date &lt;= earlierDate)
        {
            return new ValidationResult(ErrorMessage);
        }

        return ValidationResult.Success;
    }

    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = ErrorMessage,
            ValidationType = "greaterdate"
        };

        rule.ValidationParameters["earlierdate"] = EarlierDateField;

        yield return rule;
    }
}
</code></pre>
</li>
<li>
<p>Decorate the ShippedDate property with the newly implemented attribute.</p>

<pre><code>public class OrderViewModel
{
    //omitted for brevity

    [Display(Name = "Order Date")]
    [DataType(DataType.Date)]
    public DateTime? OrderDate { get; set; }

    [GreaterDate(EarlierDateField = "OrderDate", ErrorMessage = "Shipped date should be after Order date")]
    [DataType(DataType.Date)]
    public DateTime? ShippedDate { get; set; }
}
</code></pre>
</li>
<li>
<p>Implement a Kendo UI validator rule that will handle all inputs with the <code>data-val-greaterdate</code> attribute.</p>

<pre><code>@model OrderViewModel

@using (Html.BeginForm()) {
    &lt;fieldset&gt;
        &lt;legend&gt;Order&lt;/legend&gt;

        @Html.HiddenFor(model =&gt; model.OrderID)

        &lt;div class="editor-label"&gt;
            @Html.LabelFor(model =&gt; model.OrderDate)
        &lt;/div&gt;
        &lt;div class="editor-field"&gt;
            @Html.DatePickerFor(model =&gt; model.OrderDate)
            @Html.ValidationMessageFor(model =&gt; model.OrderDate)
        &lt;/div&gt;

        &lt;div class="editor-label"&gt;
            @Html.LabelFor(model =&gt; model.ShippedDate)
        &lt;/div&gt;
        &lt;div class="editor-field"&gt;
            @Html.DatePickerFor(model =&gt; model.ShippedDate)
            @Html.ValidationMessageFor(model =&gt; model.ShippedDate)
        &lt;/div&gt;

        &lt;p&gt;
            &lt;input type="submit" value="Save" /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
}

&lt;script&gt;
    $(function () {
        $("form").kendoValidator({
            rules: {
                greaterdate: function (input) {
                    if (input.is("[data-val-greaterdate]") &amp;&amp; input.val() != "") {
                        var date = kendo.parseDate(input.val()),
                            earlierDate = kendo.parseDate($("[name='" + input.attr("data-val-greaterdate-earlierdate") + "']").val());
                        return !date || !earlierDate || earlierDate.getTime() &lt; date.getTime();
                    }

                    return true;
                }
            },
            messages: {
                greaterdate: function (input) {
                    return input.attr("data-val-greaterdate");
                }
            }
        });
    });
&lt;/script&gt;
</code></pre>
</li>
</ol>

<h2 id="using-a-custom-attribute-in-an-editable-widget"><a href="#using-a-custom-attribute-in-an-editable-widget">Using a custom attribute in an editable widget</a></h2>

<p>Editable widgets, like the Grid or the ListView, initialize the validator internally and so to specify custom rules you should extend the Kendo UI Validator built-in validation rules. This approach can also be used to define rules after the Kendo UI scripts have been included and to use them in all views.</p>

<pre><code>&lt;script&gt;
    (function ($, kendo) {
        $.extend(true, kendo.ui.validator, {
            rules: {
                greaterdate: function (input) {
                    if (input.is("[data-val-greaterdate]") &amp;&amp; input.val() != "") {
                        var date = kendo.parseDate(input.val()),
                            earlierDate = kendo.parseDate($("[name='" + input.attr("data-val-greaterdate-earlierdate") + "']").val());
                        return !date || !earlierDate || earlierDate.getTime() &lt; date.getTime();
                    }

                    return true;
                }
            },
            messages: {
                greaterdate: function (input) {
                    return input.attr("data-val-greaterdate");
                }
            }
        });
    })(jQuery, kendo);
&lt;/script&gt;

@(
    Html.Kendo().Grid&lt;OrderViewModel&gt;()
        .Name("grid")
        .Columns(columns =&gt;
            {
                columns.Bound(o =&gt; o.OrderDate);
                columns.Bound(o =&gt; o.ShippedDate);
                columns.Command(command =&gt; command.Edit());
            })
        .DataSource(source =&gt; source
            .Ajax()
            .Model(model =&gt; model.Id(o =&gt; o.OrderID))
            .Read("Read", "Orders")
            .Update("Update", "Orders")
        )
)
</code></pre>

<h2 id="using-the-jquery-validation"><a href="#using-the-jquery-validation">Using the jQuery Validation</a></h2>

<p>To use the jQuery validation with the Kendo UI widgets you should follow these steps.</p>

<ol>
<li>Add the latest version of the <a href="http://www.nuget.org/packages/jQuery.Validation/">jquery.validate</a> and <a href="http://www.nuget.org/packages/Microsoft.jQuery.Unobtrusive.Validation/">jquery.validate.unobtrusive</a> scripts to the project.</li>
<li>Include them in the view in which you want to validate the user input or in the layout.</li>
<li>
<p>Override the default ignore setting after including the scripts to enable validation of hidden elements. For instance, widgets like DropDownList and NumericTextBox have a hidden input to keep the value.</p>

<pre><code>&lt;script src="@Url.Content("~/Scripts/jquery.validate.min.js")"&gt;&lt;/script&gt;
&lt;script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
    $.validator.setDefaults({
        ignore: ""
    });
&lt;/script&gt;
</code></pre>
</li>
<li><p>Define the model and create the editors the same way as in the <a href="#using-the-kendo-validator-with-dataAnnotation-attributes">Using the Kendo UI Validator with DataAnnotation attributes</a> topic.</p></li>
</ol>

<h2 id="changing-the-widgets-style-when-there-is-a-validation-error"><a href="#changing-the-widgets-style-when-there-is-a-validation-error">Changing the widgets style when there is a validation error.</a></h2>

<p>The validation error classes are applied to the inputs that are validated so the style will not be visible for widgets that use a hidden input to keep the value. In order to show an error style, the class can be copied to the visible wrapper using the approach demonstrated in the <strong>kendo-input-widgets-validation</strong> sample project in our GitHub repository on <a href="https://github.com/telerik/kendo-examples-asp-net-mvc">this</a> page.</p>

<h2 id="troubleshooting"><a href="#troubleshooting">Troubleshooting</a></h2>

<h3 id="the-validation-tooltip-is-shown-in-the-widget-wrapper-when-using-the-kendo-ui-validator"><a href="#the-validation-tooltip-is-shown-in-the-widget-wrapper-when-using-the-kendo-ui-validator">The validation tooltip is shown in the widget wrapper when using the Kendo UI Validator</a></h3>

<p>By default the tooltip is added right after the input so if the input is used to for a widget, the tooltip will be added inside the wrapper element and will not be displayed correctly. In this case, you should customize the tooltip position by using one of the following approaches.</p>

<ul>
<li>
<p>Use the <code>ValidationMessage</code> or <code>ValidationMessageFor</code> helpers for the property.</p>

<pre><code>@Html.Kendo().NumericTextBoxFor(model =&gt; model.UnitPrice)
@Html.ValidationMessageFor(model =&gt; model.UnitPrice)
</code></pre>
</li>
<li><p>Use the approach demonstrated <a href="/kendo-ui/framework/validator/overview#customizing-the-tooltip-position">here</a> to add a placeholder.</p></li>
</ul>

<h3 id="the-widgets-are-hidden-after-a-postback-when-using-the-jquery-validation"><a href="#the-widgets-are-hidden-after-a-postback-when-using-the-jquery-validation">The widgets are hidden after a postback when using the jQuery Validation</a></h3>

<p>If the client-side validation does not prevent the form to be posted and the server-side validation fails for a property, the <code>input-validation-error</code> class will be added to the input. For styling purposes, custom classes assigned to the inputs are copied to the wrapper element and because all elements with the error class will be hidden on validation, the widget will be hidden. In order to avoid this behavior you should either implement a client-side validation for the rule that has caused the validation to fail on the server or remove the class from the wrapper elements after the widgets initialization.</p>

<pre><code>@using (Html.BeginForm()) {
    //omitted for brevity
}

&lt;script type="text/javascript"&gt;
    $(function () {
        $(".k-widget").removeClass("input-validation-error");
    });
&lt;/script&gt;
</code></pre>

<h3 id="globalized-dates-and-numbers-are-not-recognized-as-valid-when-using-the-kendo-ui-validator"><a href="#globalized-dates-and-numbers-are-not-recognized-as-valid-when-using-the-kendo-ui-validator">Globalized dates and numbers are not recognized as valid when using the Kendo UI Validator.</a></h3>

<p>The Kendo UI Validator uses the current Kendo UI culture to determine if a value is in a valid format. In order for the values to be recognized as valid, you should use the same culture on the client and on the server as described in the <a href="/kendo-ui/aspnet-mvc/globalization#use-the-same-culture-on-the-server-and-client-side">Globalization</a> documentation.</p>

<p>If the above solution is not feasible, because a custom date format is used, then the build-in <code>mvcdate</code> rule that comes from <code>kendo.aspnetmvc.min.js</code> needs to be overriden.</p>

<pre><code>&lt;script src="../kendo/js/kendo.aspnetmvc.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
    kendo.ui.validator.rules.mvcdate = function (input) {
        //use the custom date format here
        //kendo.parseDate - http://docs.telerik.com/kendo-ui/api/javascript/kendo#methods-parseDate

        return input.val() === "" || kendo.parseDate(input.val(), "dd/MM/yyyy") !== null;
    }
&lt;/script&gt;
</code></pre>

<h3 id="globalized-dates-and-numbers-are-not-recognized-as-valid-when-using-the-jquery-validation"><a href="#globalized-dates-and-numbers-are-not-recognized-as-valid-when-using-the-jquery-validation">Globalized dates and numbers are not recognized as valid when using the jQuery validation.</a></h3>

<p>The jQuery validation does not support globalized dates and numbers. In order for the values to be recognized as valid when using a not default culture, you should override the validator date and number methods.</p>

<pre><code>jQuery.extend(jQuery.validator.methods, {
    date: function (value, element) {
        return this.optional(element) || kendo.parseDate(value) != null;
    },
    number: function (value, element) {
        return this.optional(element) || kendo.parseFloat(value) != null;
    }
});
</code></pre>
        </article>
    </div>
</div>

<footer>
<p>Copyright &copy; 2002-2018. All rights reserved.</p>
</footer>


    </body>
</html>

